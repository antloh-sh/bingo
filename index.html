<!DOCTYPE html>

<html>
<head>
<base target="_top"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff8f0;
      color: #333;
      -webkit-text-size-adjust: 100%; /* Prevent font scaling in Safari */
    }
    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      gap: 20px;
    }
    .jackpot-container, .table-container {
      text-align: center;
    }
    .company-logo {
      width: 400px;
      height: auto;
      margin: 0 auto 15px;
      display: block;
      max-width: 100%;
    }
    .jackpot-display {
      position: relative;
      width: 200px;
      height: 80px;
      margin: auto;
      overflow: hidden;
      border: 4px solid #d33;
      border-radius: 10px;
      background-color: #fff;
      font-size: 36px;
      font-weight: bold;
      color: #d33;
      line-height: 80px;
    }
    .spinner {
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 4px solid #d33;
      border-top: 4px solid #fff8f0;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      vertical-align: middle;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 600px;
      margin: auto;
      height: 350px;
      table-layout: fixed;
    }
    th {
      background-color: #d33;
      color: white;
      padding: 5px;
    }
    td {
      border: 1px solid #ccc;
      padding: 3px;
      text-align: center;
      width: 40px;
      height: 22px;
      font-size: 13px;
    }
    .highlight {
      background-color: #ffcccb;
    }
    .pulse {
      animation: pulse 1s ease;
    }
    @keyframes pulse {
      0% { transform: scale(1); background-color: #ffcccb; }
      50% { transform: scale(1.2); background-color: #ffe0e0; }
      100% { transform: scale(1); background-color: #ffcccb; }
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #d33;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 200px;
      max-width: 100%;
    }

    /* Mobile Layout - initially hidden */
    .mobile-layout {
      display: none;
    }
    
    /* Desktop Layout - shown by default */
    .desktop-layout {
      display: block;
    }

    /* Mobile detection using touch and high DPI */
    @media (hover: none) and (pointer: coarse), 
           (max-width: 1080px) and (min-resolution: 192dpi) {
      .mobile-layout {
        display: block;
      }
      .desktop-layout {
        display: none;
      }
      .container {
        flex-direction: column;
      }
      .company-logo {
        width: 90vw;
        max-width: 500px;
      }
      .jackpot-display {
        width: 90vw;
        max-width: 400px;
        height: 120px;
        font-size: 64px;
        line-height: 120px;
      }
      table {
        height: auto;
      }
      td {
        height: 40px;
        font-size: 24px;
      }
      th {
        font-size: 28px;
        padding: 12px;
      }
      button {
        font-size: 24px;
        padding: 15px 30px;
        margin: 20px auto;
      }
    }

    /* Fallback for older browsers */
    @media (max-width: 768px) {
      .mobile-layout {
        display: block;
      }
      .desktop-layout {
        display: none;
      }
      .container {
        flex-direction: column;
      }
      .company-logo {
        width: 90vw;
        max-width: 500px;
      }
      .jackpot-display {
        width: 90vw;
        max-width: 400px;
        height: 120px;
        font-size: 64px;
        line-height: 120px;
      }
      table {
        height: auto;
      }
      td {
        height: 40px;
        font-size: 24px;
      }
      th {
        font-size: 28px;
        padding: 12px;
      }
      button {
        font-size: 24px;
        padding: 15px 30px;
        margin: 20px auto;
      }
    }

    /* Adjustments for landscape orientation */
    @media (orientation: landscape) {
      .mobile-layout .container {
        padding: 10px;
      }
      .mobile-layout .jackpot-display {
        height: 80px;
        font-size: 48px;
        line-height: 80px;
      }
      .mobile-layout td {
        height: 30px;
        font-size: 18px;
      }
    }
  </style>

<style>
  .logo {
    width: 200px;
    margin-bottom: 20px;
  }
  canvas {
    margin: 20px auto;
    display: block;
  }
  .button {
    font-size: 1.5em;
    padding: 10px 20px;
    margin: 10px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #4CAF50;
    color: white;
  }
  .button:hover {
    background-color: #45a049;
  }
  #result {
    font-size: 2em;
    margin-top: 20px;
    color: #ff4500;
  }
  #tracker {
    margin-top: 30px;
    display: grid;
    grid-template-columns: repeat(15, 1fr);
    gap: 5px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  .cell {
    padding: 8px;
    background-color: #ffffff;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .highlight {
    background-color: #90ee90;
    font-weight: bold;
  }
</style>
</head>
<body>
<!-- Desktop Layout -->
<div class="desktop-layout">
<div class="container">
<div class="jackpot-container">
<img alt="Company Logo" class="logo" src="logo.png"/>
<div class="jackpot-display" id="desktopJackpotDisplay">---</div>
<button id="desktopSpinButton">ðŸŽ° Spin</button>
</div>
<div class="table-container">
<table id="desktopBingoTable"></table>
<button onclick="confirmNewGame()">ðŸ”„ New Game</button>
</div>
</div>
</div>
<!-- Mobile Layout -->
<div class="mobile-layout">
<div class="container">
<div class="jackpot-container">
<img alt="Company Logo" class="logo" src="logo.png"/>
<div class="jackpot-display" id="mobileJackpotDisplay">---</div>
<button id="mobileSpinButton">ðŸŽ° Spin</button>
</div>
<div class="table-container">
<table id="mobileBingoTable"></table>
<button onclick="confirmNewGame()">ðŸ”„ New Game</button>
</div>
</div>
</div>
<script>
    let numbers = [];
    let selected = null;

    // Initialize the game
    function initGame() {
      numbers = [];
      ['B','I','N','G','O'].forEach((letter, i) => {
        for (let j = 1; j <= 15; j++) {
          numbers.push({ letter: letter, number: j + i * 15 });
        }
      });
      
      drawTable('desktopBingoTable');
      drawTable('mobileBingoTable');
      saveState();
    }

    // Draw the bingo table
    function drawTable(tableId) {
      const table = document.getElementById(tableId);
      table.innerHTML = '';
      const header = document.createElement('tr');
      ['B','I','N','G','O'].forEach(letter => {
        const th = document.createElement('th');
        th.textContent = letter;
        header.appendChild(th);
      });
      table.appendChild(header);

      for (let row = 0; row < 15; row++) {
        const tr = document.createElement('tr');
        for (let col = 0; col < 5; col++) {
          const num = row + 1 + col * 15;
          const td = document.createElement('td');
          td.textContent = num;
          td.id = `cell-${num}`;
          tr.appendChild(td);
        }
        table.appendChild(tr);
      }
    }

    // Roll a new number
    function rollNumber() {
      if (numbers.length === 0) return;

      const index = Math.floor(Math.random() * numbers.length);
      selected = numbers[index];

      const desktopDisplay = document.getElementById('desktopJackpotDisplay');
      const mobileDisplay = document.getElementById('mobileJackpotDisplay');
      
      desktopDisplay.innerHTML = mobileDisplay.innerHTML = `<div class="spinner"></div>`;

      setTimeout(() => {
        const displayText = `${selected.letter}${selected.number}`;
        desktopDisplay.textContent = mobileDisplay.textContent = displayText;
        numbers.splice(index, 1);
        highlightTable(selected.number);
        saveState();
      }, 2000);
    }

    // Highlight the called number
    function highlightTable(num) {
      const cells = document.querySelectorAll(`[id="cell-${num}"]`);
      cells.forEach(cell => {
        cell.classList.add('highlight', 'pulse');
        setTimeout(() => {
          cell.classList.remove('pulse');
        }, 1000);
      });
    }

    // Custom confirmation dialog
    function showCustomConfirm(message, onConfirm) {
      const overlay = document.createElement('div');
      overlay.style.position = 'fixed';
      overlay.style.top = 0;
      overlay.style.left = 0;
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.background = 'rgba(0,0,0,0.5)';
      overlay.style.display = 'flex';
      overlay.style.alignItems = 'center';
      overlay.style.justifyContent = 'center';
      overlay.style.zIndex = 9999;

      const box = document.createElement('div');
      box.style.background = '#fff';
      box.style.padding = '20px';
      box.style.borderRadius = '10px';
      box.style.textAlign = 'center';
      box.style.width = '80%';
      box.style.maxWidth = '400px';
      box.innerHTML = `<p style="font-size: 24px; margin-bottom: 20px;">${message}</p>`;

      const yesBtn = document.createElement('button');
      yesBtn.textContent = 'Yes';
      yesBtn.style.margin = '10px';
      yesBtn.style.padding = '12px 24px';
      yesBtn.style.fontSize = '20px';
      yesBtn.onclick = () => { 
        onConfirm(); 
        document.body.removeChild(overlay); 
      };

      const noBtn = document.createElement('button');
      noBtn.textContent = 'No';
      noBtn.style.margin = '10px';
      noBtn.style.padding = '12px 24px';
      noBtn.style.fontSize = '20px';
      noBtn.onclick = () => document.body.removeChild(overlay);

      box.appendChild(yesBtn);
      box.appendChild(noBtn);
      overlay.appendChild(box);
      document.body.appendChild(overlay);
    }

    // Confirm new game
    function confirmNewGame() {
      showCustomConfirm("Are you sure you want to start a new game? This will reset all progress.", newGame);
    }

    // Start new game
    function newGame() {
      localStorage.removeItem('bingoState');
      initGame();
      document.getElementById('desktopJackpotDisplay').textContent = '---';
      document.getElementById('mobileJackpotDisplay').textContent = '---';
    }

    // Save game state
    function saveState() {
      const state = {
        numbers: numbers,
        highlighted: Array.from(document.querySelectorAll('.highlight')).map(c => c.id)
      };
      localStorage.setItem('bingoState', JSON.stringify(state));
    }

    // Restore game state
    function restoreState() {
      const state = JSON.parse(localStorage.getItem('bingoState'));
      if (state) {
        numbers = state.numbers;
        drawTable('desktopBingoTable');
        drawTable('mobileBingoTable');
        state.highlighted.forEach(id => {
          const cells = document.querySelectorAll(`[id="${id}"]`);
          cells.forEach(cell => cell.classList.add('highlight'));
        });
      } else {
        initGame();
      }
    }

    // Initialize when page loads
    window.onload = function() {
      restoreState();
      document.getElementById('desktopSpinButton').addEventListener('click', rollNumber);
      document.getElementById('mobileSpinButton').addEventListener('click', rollNumber);
    };
  </script>

<script>
  const canvas = document.getElementById("wheel");
  const ctx = canvas.getContext("2d");
  const numbers = Array.from({ length: 75 }, (_, i) => i + 1);
  const sliceAngle = (2 * Math.PI) / numbers.length;
  let angle = 0;
  let spinning = false;
  const drawnNumbers = new Set();

  function drawWheel(currentAngle) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let i = 0; i < numbers.length; i++) {
      const startAngle = currentAngle + i * sliceAngle;
      const endAngle = startAngle + sliceAngle;
      ctx.beginPath();
      ctx.moveTo(200, 200);
      ctx.arc(200, 200, 180, startAngle, endAngle);
      ctx.fillStyle = i % 2 === 0 ? "#fdd835" : "#ff7043";
      ctx.fill();
      ctx.stroke();
      ctx.save();
      ctx.translate(200, 200);
      ctx.rotate(startAngle + sliceAngle / 2);
      ctx.textAlign = "right";
      ctx.fillStyle = "#000";
      ctx.font = "12px Arial";
      ctx.fillText(numbers[i], 170, 5);
      ctx.restore();
    }
  }

  function updateTracker() {
    const tracker = document.getElementById("tracker");
    tracker.innerHTML = "";
    for (let i = 1; i <= 75; i++) {
      const cell = document.createElement("div");
      cell.className = "cell";
      cell.textContent = i;
      if (drawnNumbers.has(i)) {
        cell.classList.add("highlight");
      }
      tracker.appendChild(cell);
    }
  }

  function spinWheel() {
    if (spinning) return;
    spinning = true;
    let duration = 5000;
    let start = null;
    let totalRotation = Math.random() * 360 + 360 * 5;
    let finalAngle = angle + totalRotation * Math.PI / 180;

    function animate(timestamp) {
      if (!start) start = timestamp;
      let elapsed = timestamp - start;
      let progress = Math.min(elapsed / duration, 1);
      let easeOut = 1 - Math.pow(1 - progress, 3);
      angle = finalAngle * easeOut;
      drawWheel(angle);
      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        spinning = false;
        const selectedIndex = Math.floor(((2 * Math.PI - (angle % (2 * Math.PI))) / sliceAngle)) % numbers.length;
        const selectedNumber = numbers[selectedIndex];
        drawnNumbers.add(selectedNumber);
        document.getElementById("result").textContent = `ðŸŽ‰ Number: ${selectedNumber} ðŸŽ‰`;
        updateTracker();
      }
    }

    requestAnimationFrame(animate);
  }

  drawWheel(angle);
  updateTracker();
</script>
</body>
</html>
